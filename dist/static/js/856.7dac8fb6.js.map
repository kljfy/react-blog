{"version":3,"file":"static/js/856.7dac8fb6.js","mappings":"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","sources":["webpack://react-blog/./src/components/MenuNav/index.jsx","webpack://react-blog/./src/components/MenuNav/index.module.scss?8f98","webpack://react-blog/./src/pages/Layout/components/PersonData/index.jsx","webpack://react-blog/./src/pages/Layout/components/PersonData/index.module.scss?9fbc","webpack://react-blog/./src/pages/Layout/index.jsx","webpack://react-blog/./src/pages/Layout/index.module.scss?3e95","webpack://react-blog/./src/store/actions/login.js","webpack://react-blog/./src/store/actions/user.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport classnames from 'classnames'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './index.module.scss'\r\n\r\nexport default function MenuNav({ items, onClick }) {\r\n  const [currentMenu, setCurrentMenu] = useState('')\r\n  const handleNavItemClick = item => {\r\n    setCurrentMenu(item.key)\r\n    onClick(item)\r\n  }\r\n  return (\r\n    <nav className={styles.root}>\r\n      <ul>\r\n        {items.map(item => {\r\n          return (\r\n            <li key={item.key} onClick={() => handleNavItemClick(item)}>\r\n              <div\r\n                className={classnames(\r\n                  'label',\r\n                  currentMenu === item.key ? 'label-active' : ''\r\n                )}\r\n              >\r\n                {item.label}\r\n              </div>\r\n            </li>\r\n          )\r\n        })}\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n\r\nMenuNav.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  onClick: PropTypes.func\r\n}\r\n\r\nMenuNav.defaultProps = {\r\n  onClick: () => {}\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"rX_kEtJwGLzeUtnIs8CX\"};","import React from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { Modal, Dropdown, Menu, Space, message } from 'antd'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { SettingOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nimport styles from './index.module.scss'\r\nimport { removeToken } from '@/store/actions/login'\r\nimport { removeToken as storageRemoveToken } from '@/utils/storage'\r\nimport { removeUser } from '@/store/actions/user'\r\n\r\nexport default function PersonData() {\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  const dispatch = useDispatch()\r\n  const token = useSelector(state => state.login.token)\r\n  const user = useSelector(state => state.user)\r\n\r\n  const { confirm } = Modal\r\n\r\n  const onClick = ({ key }) => {\r\n    if (key === '0') {\r\n      history.push('/home/articleEdit', { from: location.pathname })\r\n    } else if (key === '1') {\r\n      history.push('/home/personCenter')\r\n    } else if (key === '2') {\r\n      confirm({\r\n        title: '确认退出登录?',\r\n        icon: <ExclamationCircleOutlined />,\r\n        centered: true,\r\n        cancelText: '取消',\r\n        okText: '确定',\r\n        onOk() {\r\n          dispatch(removeToken())\r\n          dispatch(removeUser())\r\n          storageRemoveToken()\r\n          message.success('退出成功')\r\n          history.push('/login')\r\n        },\r\n        onCancel() {\r\n          console.log('Cancel')\r\n        }\r\n      })\r\n    }\r\n  }\r\n  const menu = (\r\n    <Menu\r\n      onClick={onClick}\r\n      items={[\r\n        {\r\n          label: '文章编写',\r\n          key: '0'\r\n        },\r\n        {\r\n          label: '个人中心',\r\n          key: '1'\r\n        },\r\n        {\r\n          label: '退出登录',\r\n          key: '2'\r\n        }\r\n      ]}\r\n    />\r\n  )\r\n  const GoToLogin = (\r\n    <div\r\n      className=\"go-to-login\"\r\n      onClick={() =>\r\n        history.push('/login', {\r\n          from: location.pathname\r\n        })\r\n      }\r\n    >\r\n      登录\r\n    </div>\r\n  )\r\n  return (\r\n    <div className={styles.root}>\r\n      {!!token ? (\r\n        <Dropdown className=\"person-data\" overlay={menu}>\r\n          <a onClick={e => e.preventDefault()}>\r\n            <Space>\r\n              {`hi~ ${user.nickname}`}\r\n              <SettingOutlined />\r\n            </Space>\r\n          </a>\r\n        </Dropdown>\r\n      ) : (\r\n        GoToLogin\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OnlvT7G24eruB7eu7iqg\"};","import React, { useState, Suspense, useEffect } from 'react'\r\nimport { Switch, Route, useHistory } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport styles from './index.module.scss'\r\nimport MenuNav from '@/components/MenuNav'\r\nimport PersonData from './components/PersonData'\r\n\r\nconst Home = React.lazy(() => import('@/pages/Home'))\r\nconst MdArticleView = React.lazy(() => import('@/pages/MdArticle/View'))\r\nconst MdArticleEdit = React.lazy(() => import('@/pages/MdArticle/Edit'))\r\nconst ManageArticle = React.lazy(() => import('@/pages/ManageArticle'))\r\nconst PersonCenter = React.lazy(() => import('@/pages/PersonCenter'))\r\n\r\nexport default function Layout() {\r\n  const history = useHistory()\r\n  const token = useSelector(state => state.login.token)\r\n  const [menuItems, setMenuItems] = useState([])\r\n  useEffect(() => {\r\n    if (!!token) {\r\n      setMenuItems(() => {\r\n        return [\r\n          {\r\n            label: '首页',\r\n            key: 'home',\r\n            path: '/home'\r\n          },\r\n          {\r\n            label: '管理中心',\r\n            key: 'manageCenter',\r\n            path: '/home/manage'\r\n          }\r\n        ]\r\n      })\r\n    } else {\r\n      setMenuItems(() => {\r\n        return [\r\n          {\r\n            label: '首页',\r\n            key: 'home',\r\n            path: '/home'\r\n          }\r\n        ]\r\n      })\r\n    }\r\n  }, [token])\r\n\r\n  const handlerMenuClick = value => {\r\n    history.push(value.path)\r\n  }\r\n  return (\r\n    <div className={styles.root}>\r\n      <div className=\"layout-header\">\r\n        <div className=\"header-center\">\r\n          <div className=\"header-left\">\r\n            <MenuNav items={menuItems} onClick={handlerMenuClick} />\r\n          </div>\r\n          <div className=\"header-right\">\r\n            <PersonData />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"layout-body\">\r\n        <Suspense fallback={<div>loading</div>}>\r\n          <Switch>\r\n            <Route path=\"/home\" exact component={Home}></Route>\r\n            <Route\r\n              path=\"/home/articleView\"\r\n              exact\r\n              component={MdArticleView}\r\n            ></Route>\r\n            <Route\r\n              path=\"/home/articleEdit\"\r\n              exact\r\n              component={MdArticleEdit}\r\n            ></Route>\r\n            <Route\r\n              path=\"/home/manage\"\r\n              exact\r\n              component={ManageArticle}\r\n            ></Route>\r\n            <Route\r\n              path=\"/home/personCenter\"\r\n              exact\r\n              component={PersonCenter}\r\n            ></Route>\r\n          </Switch>\r\n        </Suspense>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"a5ZrEw67qroF8nEGYDst\"};","export const saveToken = (data) => {\n  return {\n    type: 'login/token',\n    data\n  }\n}\n\nexport const removeToken = () => {\n  return {\n    type: 'login/logout',\n  }\n}\n\n/**\n * 登录功能\n */\n// export const login = data => {\n//   return async dispatch => {\n//     const res = await request({\n//       method: 'post',\n//       url: '/login/user',\n//       data\n//     })\n//     dispatch(saveToken(res.data))\n//     setToken(res.data)\n//   }\n// }\n","export const saveUser = data => {\r\n  return {\r\n    type: 'user/save',\r\n    data\r\n  }\r\n}\r\n\r\nexport const removeUser = () => {\r\n  return {\r\n    type: 'user/remove'\r\n  }\r\n}\r\n\r\nexport const updateUser = data => {\r\n  return {\r\n    type: 'user/update',\r\n    data\r\n  }\r\n}\r\n"],"names":["MenuNav","items","onClick","useState","currentMenu","setCurrentMenu","className","map","item","key","handleNavItemClick","classnames","label","propTypes","PropTypes","defaultProps","PersonData","history","useHistory","location","useLocation","dispatch","useDispatch","token","useSelector","state","login","user","confirm","Modal","menu","push","from","pathname","title","icon","ExclamationCircleOutlined","centered","cancelText","okText","onOk","removeToken","removeUser","storageRemoveToken","message","onCancel","console","log","GoToLogin","overlay","e","preventDefault","nickname","SettingOutlined","Home","React","MdArticleView","MdArticleEdit","ManageArticle","PersonCenter","Layout","menuItems","setMenuItems","useEffect","path","value","Suspense","fallback","exact","component","saveToken","data","type","saveUser","updateUser"],"sourceRoot":""}