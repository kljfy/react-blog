{"version":3,"file":"static/js/313.0844856d.js","mappings":"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","sources":["webpack://react-blog/./src/api/article.js","webpack://react-blog/./src/components/ArticleList/index.jsx","webpack://react-blog/./src/components/ArticleList/index.module.scss?6e0c","webpack://react-blog/./src/pages/Home/components/PersonInfo/index.jsx","webpack://react-blog/./src/pages/Home/components/PersonInfo/index.module.scss?69e1","webpack://react-blog/./src/pages/Home/index.jsx","webpack://react-blog/./src/pages/Home/index.module.scss?7e42","webpack://react-blog/./src/utils/request.js","webpack://react-blog/./src/config/api.js"],"sourcesContent":["import request from '@/utils/request'\r\n\r\n// 添加文章\r\nexport const addArticle = data => {\r\n  return request({\r\n    method: 'post',\r\n    url: '/article/add',\r\n    data\r\n  })\r\n}\r\n\r\n// 查询首页文章列表\r\nexport const getHomeArticleList = params => {\r\n  return request({\r\n    method: 'get',\r\n    url: '/article/getHomeList',\r\n    params\r\n  })\r\n}\r\n\r\n// 查询文章列表\r\nexport const getArticleList = data => {\r\n  return request({\r\n    method: 'post',\r\n    url: '/article/getArticleList',\r\n    params: {\r\n      keyword: data.keyword\r\n    },\r\n    data: {\r\n      ...data.pageParams\r\n    }\r\n  })\r\n}\r\n\r\n// 查询文章信息\r\nexport const getArticleInfo = articleId => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/article/getArticleInfo/${articleId}`\r\n  })\r\n}\r\n\r\n// 修改文章信息\r\nexport const updateArticleInfo = data => {\r\n  return request({\r\n    method: 'post',\r\n    url: '/article/updateById',\r\n    data\r\n  })\r\n}\r\n\r\n// 根据 id 删除文章\r\nexport const deleteArticleById = id => {\r\n  return request({\r\n    method: 'get',\r\n    url: `/article/deleteById/${id}`\r\n  })\r\n}\r\n\r\n// 上传文章图片\r\nexport const uploadArticlePicture = data => {\r\n  return request({\r\n    method: 'post',\r\n    url: '/oss/uploadArticlePicture',\r\n    data\r\n  })\r\n}\r\n\r\n// 根据url删除文章图片\r\nexport const deleteArticlePicture = params => {\r\n  return request({\r\n    method: 'get',\r\n    url: '/article/deleteMdPicture',\r\n    params\r\n  })\r\n}\r\n\r\n// 根据文章id查看当前已绑定该文章的图片\r\nexport const getPicturesByArticleId = params => {\r\n  return request({\r\n    method: 'get',\r\n    url: '/article/getPicturesByArticleId',\r\n    params\r\n  })\r\n}\r\n\r\n// 清理未绑定的图片\r\nexport const deleteNoBindPicture = () => {\r\n  return request({\r\n    method: 'get',\r\n    url: '/article/deleteNoBindPicture',\r\n  })\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './index.module.scss'\r\n\r\nexport default function ArticleList({ info }) {\r\n  const history = useHistory()\r\n  const handleGotoArticle = item => {\r\n    history.push('/home/articleView', { articleId: item.id })\r\n  }\r\n  return (\r\n    <div className={styles.root}>\r\n      <div className=\"title\" onClick={() => handleGotoArticle(info)}>\r\n        {info.title}\r\n      </div>\r\n      <div className=\"tags\">{info.gmtCreate}</div>\r\n      <div className=\"introduction\">{info.description}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nArticleList.propTypes = {\r\n  info: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    gmtCreate: PropTypes.string,\r\n    description: PropTypes.string,\r\n    id: PropTypes.string\r\n  })\r\n}\r\n\r\nArticleList.defaultProps = {\r\n  info: {}\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"RhZcTniHZUq5VzuXS0KP\"};","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport avatorAsset from '@images/avator.jpg'\r\nimport styles from './index.module.scss'\r\n\r\nexport default function PersonInfo() {\r\n  const user = useSelector(state => state.user)\r\n  // const tags = [\r\n  //   {\r\n  //     label: '阅读',\r\n  //     key: 'read',\r\n  //     num: 10\r\n  //   },\r\n  //   {\r\n  //     label: '类别',\r\n  //     key: 'category',\r\n  //     num: 10\r\n  //   },\r\n  //   {\r\n  //     label: '标签',\r\n  //     key: 'label',\r\n  //     num: 10\r\n  //   }\r\n  // ]\r\n  return (\r\n    <div className={styles.root}>\r\n      <div className=\"person-info\">\r\n        <div className=\"head-portrait\">\r\n          <div className=\"avator\">\r\n            <img\r\n              className=\"avator-img\"\r\n              src={user.avatar ? `data:image/jpg;base64,${user.avatar}` : avatorAsset}\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"name\">{user.nickname}</div>\r\n        {user.personSignature ? <div className=\"person-signature\">{user.personSignature}</div> : null}\r\n        {/* <div className=\"tags\">\r\n          {tags.map(item => {\r\n            return (\r\n              <div className=\"tag\" key={item.key}>\r\n                <div className=\"category\">{item.label}</div>\r\n                <div className=\"number\">{item.num}</div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div> */}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GcFng8Ap6xIBpoPuOcwI\"};","import React, { useEffect, useState } from 'react'\nimport { List, Button, message } from 'antd'\nimport styles from './index.module.scss'\nimport ArticleList from '@/components/ArticleList'\nimport PersonInfo from './components/PersonInfo'\nimport { getHomeArticleList as getHomeArticleListApi } from '@/api/article'\n\nexport default function Home() {\n  const [initLoading, setInitLoading] = useState(true)\n  const [loading, setLoading] = useState(false)\n  const [articleList, setArticleList] = useState([])\n  const [pageCurrent, setPageCurrent] = useState(1)\n  const [isLoad, setIsLoad] = useState(true)\n  const pageSize = 10 // 首页每次加载条数\n\n  useEffect(async () => {\n    try {\n      const res = await getHomeArticleListApi({\n        page: pageCurrent,\n        size: pageSize\n      })\n      if (res.code === 200) {\n        const { page } = res.data\n        setPageCurrent(page.page + 1)\n        setArticleList(res.data.list)\n      } else {\n        message.error('初始化首页列表失败，请稍后重试')\n      }\n      setInitLoading(false)\n    } catch (e) {\n      setInitLoading(false)\n    }\n  }, [])\n\n  const onLoadMore = async () => {\n    setLoading(true)\n    try {\n      const res = await getHomeArticleListApi({\n        page: pageCurrent,\n        size: pageSize\n      })\n      if (res.code === 200) {\n        const { page } = res.data\n        setPageCurrent(page.page + 1)\n        setArticleList([...articleList, ...res.data.list])\n        if (res.data.list.length < pageSize) {\n          setIsLoad(false)\n        }\n      }\n      setLoading(false)\n    } catch (e) {\n      message.error('加载失败，请稍后重试')\n      setLoading(false)\n    }\n  }\n\n  const loadMore =\n    !initLoading && !loading && isLoad ? (\n      <div\n        style={{\n          textAlign: 'center',\n          marginTop: 12,\n          height: 32,\n          lineHeight: '32px'\n        }}\n      >\n        <Button onClick={onLoadMore}>loading more</Button>\n      </div>\n    ) : isLoad ? null : (\n      <div\n        style={{\n          textAlign: 'center',\n          marginTop: 12,\n          height: 32,\n          lineHeight: '32px'\n        }}\n      >\n        <Button type=\"text\">It is all, nothing more 🤐</Button>\n      </div>\n    )\n\n  return (\n    <div className={styles.root}>\n      <div className=\"home-body clearfix\">\n        <div className=\"left\">\n          <List\n            className=\"demo-loadmore-list\"\n            loading={initLoading}\n            itemLayout=\"horizontal\"\n            loadMore={loadMore}\n            dataSource={articleList}\n            renderItem={item => (\n              <List.Item>\n                <ArticleList info={item} key={item.id}></ArticleList>\n              </List.Item>\n            )}\n          />\n        </div>\n        <div className=\"right\">\n          <PersonInfo />\n        </div>\n      </div>\n      <div className=\"home-footer\"></div>\n    </div>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"zAyVa8SpeII5pz_hRiV6\"};","import axios from 'axios'\nimport { getToken } from './storage'\nimport baseURL from '@/config/api'\n\nconst http = axios.create({\n  baseURL,\n  timeout: 50000\n})\n\nhttp.interceptors.request.use(config => {\n  const { token } = getToken()\n  config.headers.Authorization = token\n  return config\n})\n\nhttp.interceptors.response.use(\n  response => {\n    return response.data\n  },\n  err => {\n    if (!err.response) {\n      console.log('网络繁忙，请稍后重试')\n      // return Promise.reject(err);\n    }\n    return Promise.reject(err)\n  }\n)\n\nexport default http\n","const env = process.env.NODE_ENV\r\n\r\nconst config = {\r\n  development: {\r\n    baseURL: '/api'\r\n  },\r\n  production: {\r\n    baseURL: '/api'\r\n  }\r\n}\r\n\r\nexport default config[env].baseURL\r\n"],"names":["addArticle","data","request","method","url","getHomeArticleList","params","getArticleList","keyword","pageParams","getArticleInfo","articleId","updateArticleInfo","deleteArticleById","id","uploadArticlePicture","deleteArticlePicture","getPicturesByArticleId","deleteNoBindPicture","ArticleList","info","history","useHistory","className","onClick","item","push","title","gmtCreate","description","propTypes","PropTypes","defaultProps","PersonInfo","user","useSelector","state","src","avatar","avatorAsset","alt","nickname","personSignature","i","Home","useState","initLoading","setInitLoading","loading","setLoading","articleList","setArticleList","pageCurrent","setPageCurrent","isLoad","setIsLoad","useEffect","getHomeArticleListApi","page","size","res","code","list","message","onLoadMore","length","loadMore","style","textAlign","marginTop","height","lineHeight","type","itemLayout","dataSource","renderItem","key","http","axios","baseURL","timeout","interceptors","use","config","token","getToken","headers","Authorization","response","err","console","log","Promise","reject"],"sourceRoot":""}